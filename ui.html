<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: 'Inter', sans-serif; 
      font-size: 12px; 
      padding: 16px; 
      background: #f8f9fa;
    }
    
    .section { 
      background: white; 
      border-radius: 8px; 
      padding: 16px; 
      margin-bottom: 16px; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .section-title { 
      font-weight: 600; 
      margin-bottom: 12px; 
      color: #1a1a1a;
    }
    
    .text-type-buttons {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    
    .text-type-btn {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #e1e5e9;
      background: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 500;
    }
    
    .text-type-btn:hover { background: #f8f9fa; }
    .text-type-btn.active { background: #1976d2; color: white; border-color: #1976d2; }
    
    .form-group { margin-bottom: 16px; }
    .label { 
      display: block; 
      margin-bottom: 6px; 
      font-weight: 500; 
      color: #5f6368; 
      font-size: 11px; 
    }
    
    .textarea {
      width: 100%;
      min-height: 80px;
      padding: 12px;
      border: 1px solid #e1e5e9;
      border-radius: 6px;
      font-size: 12px;
      font-family: inherit;
      resize: vertical;
    }
    
    .textarea:focus {
      outline: none;
      border-color: #1976d2;
      box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
    }
    
    .language-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 12px;
    }
    
    .language-tab {
      padding: 6px 12px;
      border: 1px solid #e1e5e9;
      background: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 10px;
      font-weight: 500;
    }
    
    .language-tab:hover { background: #f8f9fa; }
    .language-tab.active { background: #1976d2; color: white; border-color: #1976d2; }
    
    .add-language {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }
    
    .select, .input {
      padding: 8px;
      border: 1px solid #e1e5e9;
      border-radius: 4px;
      font-size: 11px;
    }
    
    .select { flex: 1; }
    
    .font-sizes {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }
    
    .font-size-input {
      width: 60px;
      padding: 6px;
      text-align: center;
      border: 1px solid #e1e5e9;
      border-radius: 4px;
      font-size: 11px;
    }
    
    .preset-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 12px;
    }
    
    .preset-btn {
      padding: 4px 8px;
      border: 1px solid #e1e5e9;
      background: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 10px;
    }
    
    .preset-btn:hover { background: #f8f9fa; }
    .preset-btn.active { background: #1976d2; color: white; border-color: #1976d2; }
    
    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      font-size: 12px;
      margin-bottom: 8px;
    }
    
    .btn-primary {
      background: #1976d2;
      color: white;
    }
    
    .btn-primary:hover { background: #1565c0; }
    
    .btn-secondary {
      background: white;
      color: #1976d2;
      border: 1px solid #1976d2;
    }
    
    .btn-secondary:hover { background: #f8f9fa; }
    
    .status {
      padding: 12px;
      border-radius: 6px;
      font-size: 11px;
      margin-bottom: 16px;
      display: none;
    }
    
    .status.success {
      background: #e8f5e8;
      color: #2e7d32;
      border: 1px solid #c8e6c9;
    }
    
    .status.error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #ffcdd2;
    }

    /* Adjust textarea to single-line input */
    #content-input {
      height: auto;
      min-height: unset;
      padding: 8px;
    }

    .headline-input {
      width: 100%;
      padding: 8px;
      border: 1px solid #e1e5e9;
      border-radius: 6px;
      font-size: 12px;
      font-family: inherit;
    }
  </style>
</head>
<body>
  <div id="status" class="status"></div>

  <!-- Text type toggle removed: interface now collects all categories at once -->

  <div class="section">
    <div class="section-title">Multiple Headlines</div>
    <div id="headlines-container">
      <div class="form-group">
        <input type="text" class="input headline-input" placeholder="Enter a headline..." />
        <button class="btn btn-secondary remove-btn">Remove</button>
      </div>
    </div>
    <button class="btn btn-secondary" id="add-headline-btn">+ Add Headline</button>

    <div class="form-group" style="margin-top:12px;">
      <div class="label">Headline Font Sizes</div>
      <div class="preset-buttons" id="preset-buttons-headline">
        <button class="preset-btn" data-target="headline" data-sizes="128,120,104,96,80,72">Large Banners</button>
        <button class="preset-btn" data-target="headline" data-sizes="64,56,48,36,24">Medium Banners</button>
        <button class="preset-btn" data-target="headline" data-sizes="20,16,14">Small Banners</button>
        <button class="preset-btn" data-target="headline" data-sizes="128,120,104,96,80,72,64,56,48,36,24,20,16,14">All Sizes</button>
      </div>
      <div class="font-sizes" id="font-sizes-headline"></div>
      <button class="btn btn-secondary" id="add-size-headline">+ Add Size</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">Multiple Subheadlines</div>
    <div id="subheadlines-container">
      <div class="form-group">
        <input type="text" class="input subheadline-input" placeholder="Enter a subheadline..." />
        <button class="btn btn-secondary remove-btn">Remove</button>
      </div>
    </div>
    <button class="btn btn-secondary" id="add-subheadline-btn">+ Add Subheadline</button>

    <div class="form-group" style="margin-top:12px;">
      <div class="label">Subheadline Font Sizes</div>
      <div class="preset-buttons" id="preset-buttons-subheadline">
        <button class="preset-btn" data-target="subheadline" data-sizes="48,36,32,28,24">Common</button>
        <button class="preset-btn" data-target="subheadline" data-sizes="24,20,18,16,14">Compact</button>
        <button class="preset-btn" data-target="subheadline" data-sizes="48,36,32,28,24,20,18,16,14">All Sizes</button>
      </div>
      <div class="font-sizes" id="font-sizes-subheadline"></div>
      <button class="btn btn-secondary" id="add-size-subheadline">+ Add Size</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">Multiple Disclaimers</div>
    <div id="disclaimers-container">
      <div class="form-group">
        <input type="text" class="input disclaimer-input" placeholder="Enter a disclaimer..." />
        <button class="btn btn-secondary remove-btn">Remove</button>
      </div>
    </div>
    <button class="btn btn-secondary" id="add-disclaimer-btn">+ Add Disclaimer</button>

    <div class="form-group" style="margin-top:12px;">
      <div class="label">Disclaimer Font Sizes</div>
      <div class="preset-buttons" id="preset-buttons-disclaimer">
        <button class="preset-btn" data-target="disclaimer" data-sizes="16,14,12,10">Common</button>
        <button class="preset-btn" data-target="disclaimer" data-sizes="14,12,10,9,8">Extra Compact</button>
        <button class="preset-btn" data-target="disclaimer" data-sizes="20,16,14,12,10,9,8">All Sizes</button>
      </div>
      <div class="font-sizes" id="font-sizes-disclaimer"></div>
      <button class="btn btn-secondary" id="add-size-disclaimer">+ Add Size</button>
    </div>
  </div>

  <!-- Unified font sizes section removed; each category has its own controls -->

  <div class="section">
    <button class="btn btn-primary" id="create-variants">Create as Variants</button>
  </div>

  <script>
    // Per-category font size sets
    const fontSizes = {
      headline: [48],
      subheadline: [24],
      disclaimer: [12]
    };

    // Initialize
    setupEventListeners();
    updateUI();

    function setupEventListeners() {
      // Font size presets per category
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const target = btn.dataset.target;
          // Mark active inside its own preset group
          btn.parentElement.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          fontSizes[target] = btn.dataset.sizes.split(',').map(s => parseInt(s));
          updateFontSizesUI(target);
        });
      });

      // Add font size per category
      document.getElementById('add-size-headline').addEventListener('click', () => {
        fontSizes.headline.push(16);
        updateFontSizesUI('headline');
      });
      document.getElementById('add-size-subheadline').addEventListener('click', () => {
        fontSizes.subheadline.push(16);
        updateFontSizesUI('subheadline');
      });
      document.getElementById('add-size-disclaimer').addEventListener('click', () => {
        fontSizes.disclaimer.push(12);
        updateFontSizesUI('disclaimer');
      });

      // Action buttons
      document.getElementById('create-variants').addEventListener('click', createVariants);
  // Removed other action buttons

      // Add functionality for multiple headlines
      const headlinesContainer = document.getElementById('headlines-container');
      const addHeadlineBtn = document.getElementById('add-headline-btn');

      addHeadlineBtn.addEventListener('click', () => {
        const formGroup = document.createElement('div');
        formGroup.className = 'form-group';

        const headlineInput = document.createElement('input');
        headlineInput.type = 'text';
        headlineInput.className = 'input headline-input';
        headlineInput.placeholder = 'Enter a headline...';

        const removeBtn = document.createElement('button');
        removeBtn.className = 'btn btn-secondary remove-btn';
        removeBtn.textContent = 'Remove';
        removeBtn.addEventListener('click', () => formGroup.remove());

        formGroup.appendChild(headlineInput);
        formGroup.appendChild(removeBtn);
        headlinesContainer.appendChild(formGroup);
      });

      // Add functionality for multiple subheadlines
      const subheadlinesContainer = document.getElementById('subheadlines-container');
      const addSubheadlineBtn = document.getElementById('add-subheadline-btn');

      addSubheadlineBtn.addEventListener('click', () => {
        const formGroup = document.createElement('div');
        formGroup.className = 'form-group';

        const subheadlineInput = document.createElement('input');
        subheadlineInput.type = 'text';
        subheadlineInput.className = 'input subheadline-input';
        subheadlineInput.placeholder = 'Enter a subheadline...';

        const removeBtn = document.createElement('button');
        removeBtn.className = 'btn btn-secondary remove-btn';
        removeBtn.textContent = 'Remove';
        removeBtn.addEventListener('click', () => formGroup.remove());

        formGroup.appendChild(subheadlineInput);
        formGroup.appendChild(removeBtn);
        subheadlinesContainer.appendChild(formGroup);
      });

      // Add functionality for multiple disclaimers
      const disclaimersContainer = document.getElementById('disclaimers-container');
      const addDisclaimerBtn = document.getElementById('add-disclaimer-btn');

      addDisclaimerBtn.addEventListener('click', () => {
        const formGroup = document.createElement('div');
        formGroup.className = 'form-group';

        const disclaimerInput = document.createElement('input');
        disclaimerInput.type = 'text';
        disclaimerInput.className = 'input disclaimer-input';
        disclaimerInput.placeholder = 'Enter a disclaimer...';

        const removeBtn = document.createElement('button');
        removeBtn.className = 'btn btn-secondary remove-btn';
        removeBtn.textContent = 'Remove';
        removeBtn.addEventListener('click', () => formGroup.remove());

        formGroup.appendChild(disclaimerInput);
        formGroup.appendChild(removeBtn);
        disclaimersContainer.appendChild(formGroup);
      });

      // Listen for plugin messages
      window.onmessage = (event) => {
        const msg = event.data.pluginMessage;
        if (msg) handlePluginMessage(msg);
      };
    }
    function updateFontSizesUI(type) {
      const sizes = fontSizes[type];
      const container = document.getElementById(`font-sizes-${type}`);
      container.innerHTML = '';

      sizes.forEach((size, index) => {
        const wrapper = document.createElement('div');
        wrapper.style.display = 'flex';
        wrapper.style.alignItems = 'center';
        wrapper.style.gap = '4px';

        const input = document.createElement('input');
        input.type = 'number';
        input.className = 'font-size-input';
        input.value = size;
        input.min = '8';
        input.max = '200';
        input.addEventListener('input', () => {
          fontSizes[type][index] = parseInt(input.value) || size;
        });

        wrapper.appendChild(input);

        if (sizes.length > 1) {
          const removeBtn = document.createElement('button');
          removeBtn.textContent = '×';
          removeBtn.style.cssText = 'width: 20px; height: 20px; padding: 0; border: 1px solid #e1e5e9; background: white; border-radius: 3px; cursor: pointer; font-size: 12px;';
          removeBtn.addEventListener('click', () => {
            fontSizes[type].splice(index, 1);
            updateFontSizesUI(type);
          });
          wrapper.appendChild(removeBtn);
        }

        container.appendChild(wrapper);
      });
    }

    function updateUI() {
      ['headline','subheadline','disclaimer'].forEach(updateFontSizesUI);
    }

    function showStatus(message, type) {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = `status ${type}`;
      status.style.display = 'block';
      setTimeout(() => status.style.display = 'none', 4000);
    }

    function createVariants() {
      const headlines = Array.from(document.querySelectorAll('.headline-input'))
        .map(input => input.value.trim())
        .filter(item => item.length > 0); // Get all non-empty headlines

      const subheadlines = Array.from(document.querySelectorAll('.subheadline-input'))
        .map(input => input.value.trim())
        .filter(item => item.length > 0); // Get all non-empty subheadlines

      const disclaimers = Array.from(document.querySelectorAll('.disclaimer-input'))
        .map(input => input.value.trim())
        .filter(item => item.length > 0); // Get all non-empty disclaimers

      if (headlines.length === 0 && subheadlines.length === 0 && disclaimers.length === 0) {
        showStatus('Please add at least one text item.', 'error');
        return;
      }

      const data = {
        headlines,
        subheadlines,
        disclaimers,
        fontSizes: {
          headline: [...fontSizes.headline],
          subheadline: [...fontSizes.subheadline],
          disclaimer: [...fontSizes.disclaimer]
        }
      };

      parent.postMessage({ pluginMessage: { type: 'create-variants', data } }, '*');
    }

    // combineVariants/createComponents/updateExisting removed per new workflow

    function handlePluginMessage(msg) {
      switch (msg.type) {
        case 'success':
          showStatus(msg.message, 'success');
          break;
        case 'error':
          showStatus(msg.message, 'error');
          break;
      }
    }
  </script>
</body>
</html>